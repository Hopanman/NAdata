부딪힌 문제

2019/06/14

1.영진위에서 10년간 상영한 영화리스트 추출과정(해결)
	
	한번에 maximum:100개씩밖에 추출이 안됨

openStartDt=2010 openEndDt=2019 해도 100개 (본래 total 11099개)
openStartDt=2010 openEndDt=2011 해도 100개 (본래 total 1163개)

100개를 100번 시행하려고 해도 그 다음에 출력할 때 같은 100개 결과값이 나와서 불가.
-curPage변수를 사용하면 됬음 


2.네이버에서 수집한 영화리스트(20100101-20190609)를 각 검색해야하는 과정

리스트에서 검색한 영화의 결과값이 여러개가 나왔을 때.
1개로 매치시켜야 함. (ex. 본래 네이버에 알라딘 치면 여러개가 나옴-yearfrom ~ yearto로 해결)
(매치가 되는것 같음)

2019/06/17

#1
영화코드 확인(링크 확인)을 위해서 영화리스트에 대한 정보가 필요한데,
(json 파일 저장과정)
양이 많아서 자꾸 에러가 뜨는 문제.

HTTP Error 429: Too Many Requests

해결방법: 네이버 개발센터에 문의 예정이나, 연락처 확인에 어려움 발생.

#2
위 문제를 해결하기 위해 20개씩 524번 돌리기로 생각해봄

파일 저장할때 어디까지 저장했는지 확인하기 위해(혹시 모를 오류 대비)

count - 몇번째 리스트인지
index - 리스트 안에서 몇번째인지
m_name - 파일명 

위와 같이 변수 설정하여 저장하기로 함
리스트 안에서 몇번째인지 어떻게 확인하는가?

*array에서 인덱스 찾는 방법
list.index(value) np.arry.tolist() - 튜플로 반환해서 포기

*np.array.tolist() 사용해서 리스트로 만들어서 해결

*import time
time.sleep(초)로 속도를 늦추니 잘됨

#3
군도(뒤에 :이 붙음), 미션임파서블(뒤에 :이 붙음), 미션 임파서블(뒤에 :이 붙음), 
범죄와의 전쟁(뒤에 :이 붙음), 스파이더맨(뒤에 :이 붙음), 어벤져스, 캡틴 아메리카(뒤에 :이 붙음), 
킹스맨(뒤에 :이 붙음), 토르(뒤에 :이 붙음),트랜스포머(뒤에 :이 붙음), 해적(뒤에 :이 붙음)

파일명에 들어갈 수 없는 문자열 - \ / : * ? " < > |

* 파싱할때 역시 : 이 들어가면 안되는 점에 주의할 것

#4
파일명에 들어갈 수 없는 문자열을 한번에 ''로 바꾸기

*정규표현식 사용예정(해결)
	
	save_name=re.sub(no_use_words,'',m_name)

#5
파일 삭제가 안되는 파일(0바이트) 삭제하기

*해결
cmd - 해당파일 경로로 바꾸기 - dir /x 로 해당파일명 옆에 경로 확인 - del /s 해당경로

#6
리스트를 데이터 프레임 변환후 csv파일로 저장할때 index값은 넣지 않기

*myframe.to_csv(filename,index=False,encoding='utf-8')

#7
이중 리스트를 하나의 리스트로 만들기

*np.flatten() 메소드 사용하면 편함. (다만 타입은 그대로 ndarray)므로
리스트로 바꾸려면
np.flatten().tolist() 사용하면 list타입으로 변환가능

#8
네이버 덧글 페이지의 끝 번호를 어떻게 확인하는가?

페이지의 끝 번호를 알기 위해서는 총 게시글의 수가 필요하고 
페이지당 개시글수가 정해져있어야 함
ex)
1페이지당 총 게시글수 10
먼저 전체 게시글수를 구하고 10으로 나눈것 +1 = 전체페이지 수

######################190619###########################
#9

개봉전 댓글리스트 csv 파일 저장할때 영화명이 보이기 위한 방법을 간구해야한다.

*csv파일에 제목하고 링크 같이 저장해서 반복문 돌려서 해결

#10

별점 가지고 오기.
일단 url부터 제대로 확인을 해야함. (url 문제였음)

#11
반복문 실행시 None타입 발생
어디서 발생하는지 확인하기 위해 순서 매길필요 발생 ...

#########################190620##############################
#12

제이슨 파일의 사전이 누락된 경우

1. 제목이 다른 경우

	영진위:20세기 소년 ; 최종장 - 우리들의 깃발
	네이버:20세기 소년 - 마지막장 우리들의 깃발

2. 같은 작품의 버전이 다른경우

	3분 파트너
	3분 파트너-무삭제

3. 개봉은 2010년 이후이나 본래 영화의 제작년도가 다른경우.

	007 북경특급 2 	(한국 개봉 2014. 05. 01)
			 영화 제작 1996
	이럴 경우 1996으로 검색해야 사전 추출 가능

	400번의 구타
	2014 지구 최후의 날
	8인 최후의 결사단

4. 영진위에는 개봉이 되었다고 하였으나, 네이버에는 개봉이 되지 않은것으로
   되어 있을 경우.

	19금 섹스의 늪	(조회됨)

5. 아예 검색이 안되는 경우

	2008 서태지 심포니 위드 톨가 카쉬프 로열필하모닉	

#13

데이터프레임 세로로 합치기. (세로로 길게)

	pd.concat([df,df])


190623

#14 (저장할때 포맷이 달라서 파일 인식의 문제 발생:없는 파일이라고 언급)
naver_json 영화 제목과 naver_reply 제목이 불일치

##naver_json에 저장할 때 포맷

no_use_words='[/:*?"<>|]'
save_name=re.sub(no_use_words,'',m_name) - 영진위 영화명에서 불러와서 함

##naver_reply에 저장할 때 포맷

data.to_csv(mypath+str(idx).zfill(5)+'_{}_영화 개봉전 댓글모음,평점,전체댓글 수.csv'
.format(re.sub(no_use_words,'',title)),
                    encoding='utf-8',index=False) - 링크모음 csv파일에서 불러온 제목

##naver_link에 저장할 때 포맷

regExp='[<b>/]'   
        title=itemDict['title']
        title=re.sub(regExp,'',title)		제이슨 파일의 title에서 [<b>/] 제거


*해결 
re.sub으로 변환한 json list를 저장하고 후에 index()로 뽑아와서
jsonlist[]식으로 파일불러옴.

